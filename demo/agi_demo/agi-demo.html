<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGI Calculator - Fact Graph Demo</title>

    <!-- USWDS CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.8.1/dist/css/uswds.min.css">
    <link rel="stylesheet" href="../assets/styles.css">

    <script type="module" src="../fg.js?v=4"></script>
    <script type="module" src="./agi-loader.js?v=4"></script>

    <style>
        .result-value.highlight {
            font-size: 1.3em;
            color: #00a91c;
            font-weight: bold;
        }

        .result-value.negative {
            color: #d83933;
        }

        .result-value.boolean-true {
            color: #00a91c;
        }

        .result-value.boolean-false {
            color: #d83933;
        }

        pre {
            background-color: #f0f0f0;
            padding: 1rem;
            border-radius: 0.25rem;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="usa-section">
        <div class="grid-container">
            <h1 class="usa-heading">Demo: Adjusted Gross Income Calculator</h1>
            <p class="usa-intro">Calculate your AGI and eligibility for Direct File</p>

            <div id="error" class="usa-alert usa-alert--error hidden" role="alert">
                <div class="usa-alert__body">
                    <p class="usa-alert__text"></p>
                </div>
            </div>

            <section class="usa-section">
                <div class="usa-alert usa-alert--info">
                    <div class="usa-alert__body">
                        <h4 class="usa-alert__heading">About This Calculator</h4>
                        <p class="usa-alert__text">This demo uses the Fact Graph engine to calculate your Adjusted Gross Income (AGI) based on your income sources and adjustments. It also determines your eligibility for Direct File based on age and citizenship.</p>
                    </div>
                </div>

                <form id="agi-form" class="usa-form usa-form--large">
                    <h2 class="usa-heading">Income Sources</h2>

                    <div class="usa-form-group">
                        <label class="usa-label" for="totalWages">Total Wages (W-2 Income)</label>
                        <span class="usa-hint">Enter your total wages from all W-2 forms</span>
                        <input class="usa-input" type="number" id="totalWages" name="totalWages" step="0.01" min="0" placeholder="0.00">
                    </div>

                    <div class="usa-form-group">
                        <label class="usa-label" for="totalInterestIncome">Total Interest Income</label>
                        <span class="usa-hint">Interest earned from savings accounts, bonds, etc.</span>
                        <input class="usa-input" type="number" id="totalInterestIncome" name="totalInterestIncome" step="0.01" min="0" placeholder="0.00">
                    </div>

                    <div class="usa-form-group">
                        <label class="usa-label" for="total1099Income">Total 1099 Income</label>
                        <span class="usa-hint">Income from freelance work, contractors, etc.</span>
                        <input class="usa-input" type="number" id="total1099Income" name="total1099Income" step="0.01" min="0" placeholder="0.00">
                    </div>

                    <h2 class="usa-heading">Adjustments to Income</h2>

                    <div class="usa-form-group">
                        <label class="usa-label" for="totalAdjustments">Total Adjustments</label>
                        <span class="usa-hint">Deductions like student loan interest, IRA contributions, etc.</span>
                        <input class="usa-input" type="number" id="totalAdjustments" name="totalAdjustments" step="0.01" min="0" placeholder="0.00">
                    </div>

                    <h2 class="usa-heading">Personal Information</h2>

                    <div class="usa-form-group">
                        <label class="usa-label" for="dateOfBirth">Date of Birth</label>
                        <span class="usa-hint">Your birth date (used to calculate age and eligibility)</span>
                        <input class="usa-input" type="date" id="dateOfBirth" name="dateOfBirth" required>
                    </div>

                    <div class="usa-checkbox">
                        <input class="usa-checkbox__input" type="checkbox" id="isUsCitizen" name="isUsCitizen">
                        <label class="usa-checkbox__label" for="isUsCitizen">I am a U.S. Citizen</label>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="usa-button" type="submit">Calculate AGI</button>
                        <button class="usa-button usa-button--secondary" type="button" onclick="resetForm()">Reset Form</button>
                    </div>
                </form>
            </section>

            <section id="results" class="usa-section">
                <h2 class="usa-heading">Results</h2>

                <div class="result-item">
                    <span class="result-label">Adjusted Gross Income (AGI):</span>
                    <span class="result-value highlight" id="agi-value">$0.00</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Your Age (as of tax year 2025):</span>
                    <span class="result-value" id="age-value">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Age 16 or Older:</span>
                    <span class="result-value" id="age16-value">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Eligible for Direct File:</span>
                    <span class="result-value" id="eligible-value">-</span>
                </div>

                <button class="usa-button usa-button--outline" type="button" onclick="toggleGraphJson()">Show/Hide Graph JSON</button>

                <div id="graph-json">
                    <h3 class="usa-heading" style="margin-top: 2rem;">Graph Data (JSON)</h3>
                    <pre id="graph-json-content"></pre>
                </div>
            </section>
        </div>
    </div>

    <!-- USWDS JS -->
    <script src="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.8.1/dist/js/uswds.min.js"></script>
</body>
</html>
